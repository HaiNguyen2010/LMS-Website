{
  "openapi": "3.0.0",
  "info": {
    "title": "LMS Backend API",
    "version": "1.0.0",
    "description": "API documentation cho hệ thống Learning Management System (LMS)",
    "contact": {
      "name": "LMS Team",
      "email": "admin@lms.com"
    },
    "license": {
      "name": "ISC",
      "url": "https://opensource.org/licenses/ISC"
    }
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Development server"
    },
    {
      "url": "https://api.lms.com",
      "description": "Production server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Nhập JWT token để xác thực"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "required": [
          "name",
          "email",
          "role"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của người dùng",
            "example": 1
          },
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "Tên người dùng",
            "example": "Nguyễn Văn A"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email của người dùng",
            "example": "nguyenvana@example.com"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "teacher",
              "student"
            ],
            "description": "Vai trò của người dùng",
            "example": "student"
          },
          "phoneNumber": {
            "type": "string",
            "maxLength": 20,
            "description": "Số điện thoại của người dùng",
            "example": "0901234567"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "description": "Mã số sinh viên hoặc mã số giáo viên (duy nhất)",
            "example": "SV001"
          },
          "address": {
            "type": "string",
            "description": "Địa chỉ của người dùng",
            "example": "Hà Nội"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái kích hoạt tài khoản",
            "example": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Thời gian tạo tài khoản",
            "example": "2023-10-07T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Thời gian cập nhật cuối",
            "example": "2023-10-07T10:30:00Z"
          }
        }
      },
      "UserRegister": {
        "type": "object",
        "required": [
          "name",
          "email",
          "password"
        ],
        "properties": {
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "Tên người dùng",
            "example": "Nguyễn Văn A"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email của người dùng",
            "example": "nguyenvana@example.com"
          },
          "password": {
            "type": "string",
            "minLength": 6,
            "maxLength": 50,
            "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)",
            "description": "Mật khẩu (ít nhất 6 ký tự, có chữ hoa, chữ thường và số)",
            "example": "Password123"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "teacher",
              "student"
            ],
            "description": "Vai trò của người dùng",
            "example": "student",
            "default": "student"
          }
        },
        "description": "Sau khi đăng ký, tài khoản sẽ có: code = null (chưa có mã số), isActive = false (chưa được kích hoạt). Admin sẽ thêm mã số và kích hoạt tài khoản sau."
      },
      "UserLogin": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email đăng nhập",
            "example": "nguyenvana@example.com"
          },
          "password": {
            "type": "string",
            "description": "Mật khẩu",
            "example": "Password123"
          }
        }
      },
      "UserUpdate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "Tên người dùng",
            "example": "Nguyễn Văn B"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email của người dùng",
            "example": "nguyenvanb@example.com"
          },
          "password": {
            "type": "string",
            "minLength": 6,
            "maxLength": 50,
            "description": "Mật khẩu mới (nếu muốn thay đổi). Để trống nếu không đổi mật khẩu.",
            "example": "NewPassword123"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "teacher",
              "student"
            ],
            "description": "Vai trò của người dùng (chỉ admin mới có thể thay đổi)",
            "example": "teacher"
          },
          "phoneNumber": {
            "type": "string",
            "maxLength": 20,
            "description": "Số điện thoại của người dùng. Để trống để xóa số điện thoại.",
            "example": "0901234567"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "description": "Mã số sinh viên hoặc mã số giáo viên (phải duy nhất). Chỉ admin có thể thay đổi. Để trống để xóa mã số.",
            "example": "GV001"
          },
          "address": {
            "type": "string",
            "maxLength": 500,
            "description": "Địa chỉ của người dùng. Để trống để xóa địa chỉ.",
            "example": "TP. Hồ Chí Minh"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái kích hoạt tài khoản (chỉ admin mới có thể thay đổi)",
            "example": true
          }
        },
        "description": "Tất cả các trường đều là optional. Chỉ gửi các trường cần cập nhật. Admin có thể cập nhật tất cả, user thường chỉ có thể cập nhật thông tin cá nhân (name, email, password, phoneNumber, address)."
      },
      "ChangePassword": {
        "type": "object",
        "required": [
          "currentPassword",
          "newPassword",
          "confirmPassword"
        ],
        "properties": {
          "currentPassword": {
            "type": "string",
            "description": "Mật khẩu hiện tại",
            "example": "Password123"
          },
          "newPassword": {
            "type": "string",
            "minLength": 6,
            "maxLength": 50,
            "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)",
            "description": "Mật khẩu mới",
            "example": "NewPassword456"
          },
          "confirmPassword": {
            "type": "string",
            "description": "Xác nhận mật khẩu mới",
            "example": "NewPassword456"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Đăng nhập thành công"
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "$ref": "#/components/schemas/User"
              },
              "token": {
                "type": "string",
                "description": "JWT token",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              }
            }
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Thành công"
          },
          "data": {
            "type": "object"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Có lỗi xảy ra"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string",
                  "example": "email"
                },
                "message": {
                  "type": "string",
                  "example": "Email không hợp lệ"
                }
              }
            }
          }
        }
      },
      "PaginationInfo": {
        "type": "object",
        "properties": {
          "currentPage": {
            "type": "integer",
            "example": 1
          },
          "totalPages": {
            "type": "integer",
            "example": 5
          },
          "totalUsers": {
            "type": "integer",
            "example": 50
          },
          "hasNextPage": {
            "type": "boolean",
            "example": true
          },
          "hasPrevPage": {
            "type": "boolean",
            "example": false
          },
          "limit": {
            "type": "integer",
            "example": 10
          }
        }
      },
      "UserListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Lấy danh sách người dùng thành công"
          },
          "data": {
            "type": "object",
            "properties": {
              "users": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/User"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/PaginationInfo"
              }
            }
          }
        }
      },
      "UserStats": {
        "type": "object",
        "properties": {
          "totalUsers": {
            "type": "integer",
            "example": 100
          },
          "newUsersThisMonth": {
            "type": "integer",
            "example": 15
          },
          "roleStats": {
            "type": "object",
            "properties": {
              "admin": {
                "type": "integer",
                "example": 2
              },
              "teacher": {
                "type": "integer",
                "example": 10
              },
              "student": {
                "type": "integer",
                "example": 88
              }
            }
          }
        }
      },
      "Class": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của lớp học",
            "example": 1
          },
          "name": {
            "type": "string",
            "description": "Tên lớp học",
            "example": "Lớp 10A1"
          },
          "grade": {
            "type": "integer",
            "minimum": 1,
            "maximum": 12,
            "description": "Khối",
            "example": 10
          },
          "description": {
            "type": "string",
            "description": "Mô tả lớp học",
            "example": "Lớp chuyên Toán - Tin"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          }
        }
      },
      "Subject": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của môn học",
            "example": 1
          },
          "name": {
            "type": "string",
            "description": "Tên môn học",
            "example": "Toán học"
          },
          "code": {
            "type": "string",
            "description": "Mã môn học",
            "example": "MATH"
          },
          "description": {
            "type": "string",
            "description": "Mô tả môn học",
            "example": "Môn toán học cơ bản và nâng cao"
          },
          "credits": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10,
            "description": "Số tín chỉ",
            "example": 4
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          }
        }
      },
      "TeacherAssignment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của phân công",
            "example": 1
          },
          "teacherId": {
            "type": "integer",
            "description": "ID giáo viên",
            "example": 1
          },
          "classId": {
            "type": "integer",
            "description": "ID lớp học",
            "example": 1
          },
          "subjectId": {
            "type": "integer",
            "description": "ID môn học",
            "example": 1
          },
          "startDate": {
            "type": "string",
            "format": "date",
            "description": "Ngày bắt đầu",
            "example": "2024-01-01"
          },
          "endDate": {
            "type": "string",
            "format": "date",
            "description": "Ngày kết thúc",
            "example": "2024-06-30"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái hoạt động",
            "example": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "Teacher": {
            "$ref": "#/components/schemas/User"
          },
          "Class": {
            "$ref": "#/components/schemas/Class"
          },
          "Subject": {
            "$ref": "#/components/schemas/Subject"
          }
        }
      },
      "StudentEnrollment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của ghi danh",
            "example": 1
          },
          "studentId": {
            "type": "integer",
            "description": "ID học sinh",
            "example": 1
          },
          "classId": {
            "type": "integer",
            "description": "ID lớp học",
            "example": 1
          },
          "enrollmentDate": {
            "type": "string",
            "format": "date",
            "description": "Ngày ghi danh",
            "example": "2024-01-15"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái hoạt động",
            "example": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T00:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T00:00:00Z"
          },
          "Student": {
            "$ref": "#/components/schemas/User"
          },
          "Class": {
            "$ref": "#/components/schemas/Class"
          }
        }
      },
      "Attachment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của file đính kèm",
            "example": 1
          },
          "attachableType": {
            "type": "string",
            "enum": [
              "lesson",
              "assignment",
              "submission"
            ],
            "description": "Loại đối tượng đính kèm",
            "example": "lesson"
          },
          "attachableId": {
            "type": "integer",
            "description": "ID của đối tượng đính kèm",
            "example": 1
          },
          "fileName": {
            "type": "string",
            "description": "Tên file gốc",
            "example": "bai-giang-toan.pdf"
          },
          "fileUrl": {
            "type": "string",
            "description": "Đường dẫn đến file",
            "example": "/uploads/lessons/1234567890-bai-giang-toan.pdf"
          },
          "fileSize": {
            "type": "integer",
            "description": "Kích thước file (bytes)",
            "example": 1048576
          },
          "fileType": {
            "type": "string",
            "description": "Loại file (extension)",
            "example": "pdf"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type của file",
            "example": "application/pdf"
          },
          "sortOrder": {
            "type": "integer",
            "description": "Thứ tự sắp xếp",
            "example": 0
          },
          "description": {
            "type": "string",
            "description": "Mô tả file (optional)",
            "example": "Tài liệu bài giảng chính"
          },
          "uploadedBy": {
            "type": "integer",
            "description": "ID người upload",
            "example": 1
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          }
        }
      },
      "Lesson": {
        "type": "object",
        "required": [
          "classId",
          "subjectId",
          "title",
          "createdBy"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của bài giảng",
            "example": 1
          },
          "classId": {
            "type": "integer",
            "description": "ID lớp học",
            "example": 1
          },
          "subjectId": {
            "type": "integer",
            "description": "ID môn học",
            "example": 1
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Tiêu đề bài giảng",
            "example": "Bài 1: Giới thiệu về Toán học"
          },
          "description": {
            "type": "string",
            "maxLength": 1000,
            "description": "Mô tả chi tiết bài giảng",
            "example": "Bài giảng giới thiệu các khái niệm cơ bản về toán học"
          },
          "attachments": {
            "type": "array",
            "description": "Danh sách file đính kèm",
            "items": {
              "$ref": "#/components/schemas/Attachment"
            }
          },
          "createdBy": {
            "type": "integer",
            "description": "ID người tạo bài giảng",
            "example": 1
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "published",
              "archived"
            ],
            "description": "Trạng thái bài giảng",
            "example": "published"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          },
          "class": {
            "$ref": "#/components/schemas/Class"
          },
          "subject": {
            "$ref": "#/components/schemas/Subject"
          },
          "creator": {
            "$ref": "#/components/schemas/User"
          }
        }
      },
      "LessonCreateRequest": {
        "type": "object",
        "required": [
          "classId",
          "subjectId",
          "title"
        ],
        "properties": {
          "classId": {
            "type": "integer",
            "description": "ID lớp học",
            "example": 1
          },
          "subjectId": {
            "type": "integer",
            "description": "ID môn học",
            "example": 1
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Tiêu đề bài giảng",
            "example": "Bài 1: Giới thiệu về Toán học"
          },
          "description": {
            "type": "string",
            "maxLength": 1000,
            "description": "Mô tả chi tiết bài giảng",
            "example": "Bài giảng giới thiệu các khái niệm cơ bản về toán học"
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "published",
              "archived"
            ],
            "description": "Trạng thái bài giảng",
            "example": "published"
          },
          "files": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "binary"
            },
            "description": "Danh sách file đính kèm (tối đa 10 files, mỗi file tối đa 100MB). Hỗ trợ: pdf, docx, doc, pptx, ppt, mp4, avi, mkv, xlsx, xls, jpg, jpeg, png, zip, rar, txt",
            "maxItems": 10
          }
        }
      },
      "LessonListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "lessons": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Lesson"
                }
              },
              "pagination": {
                "type": "object",
                "properties": {
                  "currentPage": {
                    "type": "integer",
                    "example": 1
                  },
                  "totalPages": {
                    "type": "integer",
                    "example": 5
                  },
                  "totalItems": {
                    "type": "integer",
                    "example": 50
                  },
                  "itemsPerPage": {
                    "type": "integer",
                    "example": 10
                  }
                }
              }
            }
          }
        }
      },
      "ValidationError": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Dữ liệu đầu vào không hợp lệ"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string",
                  "example": "name"
                },
                "message": {
                  "type": "string",
                  "example": "Tên không được để trống"
                },
                "value": {
                  "type": "string",
                  "example": ""
                }
              }
            }
          }
        }
      },
      "NotFoundError": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Không tìm thấy tài nguyên"
          }
        }
      },
      "UnauthorizedError": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Token không được cung cấp hoặc không hợp lệ"
          }
        }
      },
      "ForbiddenError": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Bạn không có quyền truy cập tài nguyên này"
          }
        }
      },
      "ForumPost": {
        "type": "object",
        "required": [
          "title",
          "content",
          "authorId",
          "classId"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID của bài viết"
          },
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 200,
            "description": "Tiêu đề bài viết"
          },
          "content": {
            "type": "string",
            "minLength": 10,
            "maxLength": 10000,
            "description": "Nội dung bài viết"
          },
          "authorId": {
            "type": "integer",
            "description": "ID tác giả"
          },
          "classId": {
            "type": "integer",
            "description": "ID lớp học"
          },
          "isPinned": {
            "type": "boolean",
            "description": "Bài viết được ghim"
          },
          "isLocked": {
            "type": "boolean",
            "description": "Bài viết bị khóa"
          },
          "viewCount": {
            "type": "integer",
            "description": "Số lượt xem"
          },
          "likeCount": {
            "type": "integer",
            "description": "Số lượt thích"
          },
          "commentCount": {
            "type": "integer",
            "description": "Số bình luận"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Danh sách tags"
          },
          "attachments": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "File đính kèm"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ForumComment": {
        "type": "object",
        "required": [
          "postId",
          "authorId",
          "content"
        ],
        "properties": {
          "id": {
            "type": "integer"
          },
          "postId": {
            "type": "integer"
          },
          "authorId": {
            "type": "integer"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "maxLength": 2000
          },
          "parentId": {
            "type": "integer",
            "nullable": true
          },
          "likeCount": {
            "type": "integer"
          },
          "replyCount": {
            "type": "integer"
          },
          "attachments": {
            "type": "array"
          },
          "isEdited": {
            "type": "boolean"
          },
          "editedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "Grade": {
        "type": "object",
        "required": [
          "studentId",
          "subjectId",
          "classId",
          "gradeValue",
          "gradeType",
          "term"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID duy nhất của điểm"
          },
          "studentId": {
            "type": "integer",
            "description": "ID học sinh"
          },
          "subjectId": {
            "type": "integer",
            "description": "ID môn học"
          },
          "classId": {
            "type": "integer",
            "description": "ID lớp học"
          },
          "gradeValue": {
            "type": "number",
            "minimum": 0,
            "maximum": 10,
            "description": "Điểm số"
          },
          "gradeType": {
            "type": "string",
            "enum": [
              "homework",
              "quiz",
              "midterm",
              "final",
              "assignment",
              "participation"
            ],
            "description": "Loại điểm"
          },
          "weight": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Trọng số"
          },
          "term": {
            "type": "string",
            "enum": [
              1,
              2,
              "final"
            ],
            "description": "Học kỳ"
          },
          "academicYear": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{4}$",
            "description": "Năm học (YYYY-YYYY)"
          },
          "remarks": {
            "type": "string",
            "maxLength": 1000,
            "description": "Ghi chú"
          },
          "recordedBy": {
            "type": "integer",
            "description": "ID người nhập điểm"
          },
          "recordedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Thời gian nhập điểm"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái hoạt động"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Notification": {
        "type": "object",
        "required": [
          "title",
          "message",
          "senderId",
          "receiverRole"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID thông báo"
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Tiêu đề thông báo"
          },
          "message": {
            "type": "string",
            "minLength": 1,
            "maxLength": 5000,
            "description": "Nội dung thông báo"
          },
          "senderId": {
            "type": "integer",
            "description": "ID người gửi"
          },
          "receiverRole": {
            "type": "string",
            "enum": [
              "student",
              "teacher",
              "admin",
              "all"
            ],
            "description": "Vai trò người nhận"
          },
          "classId": {
            "type": "integer",
            "nullable": true,
            "description": "ID lớp học"
          },
          "subjectId": {
            "type": "integer",
            "nullable": true,
            "description": "ID môn học"
          },
          "type": {
            "type": "string",
            "enum": [
              "announcement",
              "assignment",
              "grade",
              "forum",
              "system",
              "reminder"
            ],
            "default": "announcement",
            "description": "Loại thông báo"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "default": "medium",
            "description": "Mức độ ưu tiên"
          },
          "isRead": {
            "type": "boolean",
            "default": false,
            "description": "Trạng thái đã đọc"
          },
          "readCount": {
            "type": "integer",
            "description": "Số lượt đọc"
          },
          "targetCount": {
            "type": "integer",
            "description": "Tổng số người nhận"
          },
          "scheduledAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Thời gian lên lịch"
          },
          "sentAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Thời gian gửi"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Thời gian hết hạn"
          },
          "metadata": {
            "type": "object",
            "description": "Dữ liệu bổ sung"
          },
          "attachments": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "File đính kèm"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "responses": {
      "ValidationError": {
        "description": "Lỗi validation dữ liệu đầu vào",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ValidationError"
            }
          }
        }
      },
      "NotFoundError": {
        "description": "Không tìm thấy tài nguyên",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/NotFoundError"
            }
          }
        }
      },
      "UnauthorizedError": {
        "description": "Token không được cung cấp hoặc không hợp lệ",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/UnauthorizedError"
            }
          }
        }
      },
      "ForbiddenError": {
        "description": "Không có quyền truy cập",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ForbiddenError"
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "Các API liên quan đến xác thực người dùng"
    },
    {
      "name": "User Management",
      "description": "Các API quản lý người dùng (chỉ dành cho Admin)"
    },
    {
      "name": "Class Management",
      "description": "Các API quản lý lớp học (chỉ dành cho Admin)"
    },
    {
      "name": "Subject Management",
      "description": "Các API quản lý môn học (chỉ dành cho Admin)"
    },
    {
      "name": "Teacher Assignment",
      "description": "Các API quản lý phân công giáo viên (chỉ dành cho Admin)"
    },
    {
      "name": "Student Enrollment",
      "description": "Các API quản lý ghi danh học sinh (chỉ dành cho Admin)"
    },
    {
      "name": "Lesson Management",
      "description": "Các API quản lý bài giảng và tài liệu (Admin, Teacher, Student)"
    },
    {
      "name": "Health Check",
      "description": "Kiểm tra trạng thái server"
    }
  ],
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Đăng ký tài khoản mới",
        "description": "Tạo tài khoản người dùng mới trong hệ thống LMS",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Đăng ký thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dữ liệu không hợp lệ hoặc email đã tồn tại",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Đăng nhập vào hệ thống",
        "description": "Xác thực người dùng và trả về JWT token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Đăng nhập thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dữ liệu không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Email hoặc mật khẩu không đúng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Đăng xuất khỏi hệ thống",
        "description": "Đăng xuất người dùng (client sẽ xóa token)",
        "responses": {
          "200": {
            "description": "Đăng xuất thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/profile": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Lấy thông tin profile người dùng",
        "description": "Lấy thông tin chi tiết của người dùng hiện tại",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông tin thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy thông tin thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ hoặc đã hết hạn",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Authentication"
        ],
        "summary": "Cập nhật thông tin profile",
        "description": "Cập nhật tên và email của người dùng hiện tại",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100,
                    "example": "Nguyễn Văn B"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "nguyenvanb@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật thông tin thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Email đã được sử dụng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/change-password": {
      "put": {
        "tags": [
          "Authentication"
        ],
        "summary": "Đổi mật khẩu",
        "description": "Thay đổi mật khẩu của người dùng hiện tại",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePassword"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Đổi mật khẩu thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Mật khẩu hiện tại không đúng hoặc dữ liệu không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh-token": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Làm mới JWT token",
        "description": "Tạo token mới cho người dùng đã xác thực",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Làm mới token thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Làm mới token thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/classes": {
      "get": {
        "summary": "Lấy danh sách tất cả lớp học",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          },
          {
            "in": "query",
            "name": "grade",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 12
            },
            "description": "Lọc theo khối"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Tìm kiếm theo tên lớp"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách lớp học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy danh sách lớp học thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "classes": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Class"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          }
        }
      },
      "post": {
        "summary": "Tạo lớp học mới",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "grade"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Lớp 10A1"
                  },
                  "grade": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 12,
                    "example": 10
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 1000,
                    "example": "Lớp chuyên Toán - Tin"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo lớp học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Tạo lớp học thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Class"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/api/v1/classes/{id}": {
      "get": {
        "summary": "Lấy thông tin chi tiết lớp học theo ID",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông tin lớp học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy thông tin lớp học thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Class"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "put": {
        "summary": "Cập nhật thông tin lớp học",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Lớp 10A1 (Cập nhật)"
                  },
                  "grade": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 12,
                    "example": 10
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 1000,
                    "example": "Lớp chuyên Toán - Tin (Cập nhật)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật lớp học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật lớp học thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Class"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "summary": "Xóa lớp học (soft delete)",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa lớp học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Xóa lớp học thành công"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/classes/{id}/students": {
      "get": {
        "summary": "Lấy danh sách học sinh trong lớp",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách học sinh trong lớp thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy danh sách học sinh trong lớp thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "students": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/User"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "post": {
        "summary": "Thêm học sinh vào lớp",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "studentIds"
                ],
                "properties": {
                  "studentIds": {
                    "type": "array",
                    "items": {
                      "type": "integer"
                    },
                    "minItems": 1,
                    "example": [
                      1,
                      2,
                      3
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Thêm học sinh vào lớp thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Thêm học sinh vào lớp thành công"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/classes/{id}/students/{studentId}": {
      "delete": {
        "summary": "Xóa học sinh khỏi lớp",
        "tags": [
          "Class Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "path",
            "name": "studentId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID học sinh"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa học sinh khỏi lớp thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Xóa học sinh khỏi lớp thành công"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/forum/classes/{classId}/posts": {
      "get": {
        "summary": "Lấy danh sách bài viết theo lớp",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "classId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Số bài viết mỗi trang"
          },
          {
            "in": "query",
            "name": "sort",
            "schema": {
              "type": "string",
              "enum": [
                "recent",
                "popular",
                "discussed"
              ],
              "default": "recent"
            },
            "description": "Cách sắp xếp"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách bài viết thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "posts": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/ForumPost"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/Pagination"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/forum/posts": {
      "post": {
        "summary": "Tạo bài viết mới",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "content",
                  "classId"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 5,
                    "maxLength": 200
                  },
                  "content": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 10000
                  },
                  "classId": {
                    "type": "integer"
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "attachments": {
                    "type": "array",
                    "items": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo bài viết thành công"
          }
        }
      }
    },
    "/api/v1/forum/posts/{id}": {
      "get": {
        "summary": "Lấy chi tiết bài viết",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID bài viết"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy bài viết thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ForumPost"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Cập nhật bài viết",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 5,
                    "maxLength": 200
                  },
                  "content": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 10000
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "attachments": {
                    "type": "array"
                  },
                  "isPinned": {
                    "type": "boolean"
                  },
                  "isLocked": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật bài viết thành công"
          }
        }
      },
      "delete": {
        "summary": "Xóa bài viết",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa bài viết thành công"
          }
        }
      }
    },
    "/api/v1/forum/posts/{postId}/comments": {
      "get": {
        "summary": "Lấy bình luận của bài viết",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "postId",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy bình luận thành công"
          }
        }
      }
    },
    "/api/v1/forum/comments": {
      "post": {
        "summary": "Tạo bình luận mới",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "postId",
                  "content"
                ],
                "properties": {
                  "postId": {
                    "type": "integer"
                  },
                  "content": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 2000
                  },
                  "parentId": {
                    "type": "integer"
                  },
                  "attachments": {
                    "type": "array"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo bình luận thành công"
          }
        }
      }
    },
    "/api/v1/forum/comments/{id}": {
      "put": {
        "summary": "Cập nhật bình luận",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "content"
                ],
                "properties": {
                  "content": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 2000
                  },
                  "attachments": {
                    "type": "array"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật bình luận thành công"
          }
        }
      },
      "delete": {
        "summary": "Xóa bình luận",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa bình luận thành công"
          }
        }
      }
    },
    "/api/v1/forum/likes": {
      "post": {
        "summary": "Toggle like/unlike",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "targetType",
                  "targetId"
                ],
                "properties": {
                  "targetType": {
                    "type": "string",
                    "enum": [
                      "post",
                      "comment"
                    ]
                  },
                  "targetId": {
                    "type": "integer"
                  },
                  "likeType": {
                    "type": "string",
                    "enum": [
                      "like",
                      "love",
                      "laugh",
                      "wow",
                      "sad",
                      "angry"
                    ],
                    "default": "like"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Toggle like thành công"
          }
        }
      }
    },
    "/api/v1/forum/likes/{targetType}/{targetId}": {
      "get": {
        "summary": "Lấy danh sách likes",
        "tags": [
          "Forum"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "targetType",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "post",
                "comment"
              ]
            }
          },
          {
            "in": "path",
            "name": "targetId",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách likes thành công"
          }
        }
      }
    },
    "/api/v1/grades": {
      "post": {
        "tags": [
          "Grades"
        ],
        "summary": "Nhập điểm mới",
        "description": "Tạo điểm mới cho học sinh (chỉ Admin và Teacher)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "studentId",
                  "subjectId",
                  "classId",
                  "gradeValue",
                  "gradeType",
                  "term"
                ],
                "properties": {
                  "studentId": {
                    "type": "integer",
                    "description": "ID học sinh"
                  },
                  "subjectId": {
                    "type": "integer",
                    "description": "ID môn học"
                  },
                  "classId": {
                    "type": "integer",
                    "description": "ID lớp học"
                  },
                  "gradeValue": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 10,
                    "description": "Điểm số"
                  },
                  "gradeType": {
                    "type": "string",
                    "enum": [
                      "homework",
                      "quiz",
                      "midterm",
                      "final",
                      "assignment",
                      "participation"
                    ],
                    "description": "Loại điểm"
                  },
                  "weight": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100,
                    "description": "Trọng số (tự động nếu không cung cấp)"
                  },
                  "term": {
                    "type": "string",
                    "enum": [
                      1,
                      2,
                      "final"
                    ],
                    "description": "Học kỳ"
                  },
                  "academicYear": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{4}$",
                    "description": "Năm học (tự động nếu không cung cấp)"
                  },
                  "remarks": {
                    "type": "string",
                    "maxLength": 1000,
                    "description": "Ghi chú"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Nhập điểm thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Grade"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      },
      "get": {
        "tags": [
          "Grades"
        ],
        "summary": "Lấy danh sách điểm theo lớp",
        "description": "Lấy danh sách điểm với phân trang và bộ lọc (Admin xem tất cả, Teacher chỉ xem lớp mình dạy)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "classId",
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học (optional)"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          },
          {
            "in": "query",
            "name": "studentId",
            "schema": {
              "type": "integer"
            },
            "description": "ID học sinh"
          },
          {
            "in": "query",
            "name": "term",
            "schema": {
              "type": "string",
              "enum": [
                "1",
                "2",
                "final"
              ]
            },
            "description": "Học kỳ"
          },
          {
            "in": "query",
            "name": "academicYear",
            "schema": {
              "type": "string"
            },
            "description": "Năm học (VD 2023-2024)"
          },
          {
            "in": "query",
            "name": "gradeType",
            "schema": {
              "type": "string",
              "enum": [
                "homework",
                "quiz",
                "midterm",
                "final",
                "assignment",
                "participation"
              ]
            },
            "description": "Loại điểm"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Số trang"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Số lượng kết quả mỗi trang"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "default": "recordedAt"
            },
            "description": "Sắp xếp theo trường"
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "ASC",
                "DESC"
              ],
              "default": "DESC"
            },
            "description": "Thứ tự sắp xếp"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách điểm thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Grade"
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "currentPage": {
                              "type": "integer"
                            },
                            "totalPages": {
                              "type": "integer"
                            },
                            "totalItems": {
                              "type": "integer"
                            },
                            "itemsPerPage": {
                              "type": "integer"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/api/v1/grades/student/{id}": {
      "get": {
        "tags": [
          "Grades"
        ],
        "summary": "Xem điểm cá nhân học sinh",
        "description": "Lấy danh sách điểm của một học sinh cụ thể",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID học sinh"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          },
          {
            "in": "query",
            "name": "classId",
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "query",
            "name": "term",
            "schema": {
              "type": "string",
              "enum": [
                1,
                2,
                "final"
              ]
            },
            "description": "Học kỳ"
          },
          {
            "in": "query",
            "name": "academicYear",
            "schema": {
              "type": "string",
              "pattern": "^\\d{4}-\\d{4}$"
            },
            "description": "Năm học"
          },
          {
            "in": "query",
            "name": "gradeType",
            "schema": {
              "type": "string",
              "enum": [
                "homework",
                "quiz",
                "midterm",
                "final",
                "assignment",
                "participation"
              ]
            },
            "description": "Loại điểm"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Số trang"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Số lượng điểm mỗi trang"
          }
        ],
        "responses": {
          "200": {
            "description": "Điểm của học sinh",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "grades": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Grade"
                          }
                        },
                        "averages": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "subjectId": {
                                "type": "integer"
                              },
                              "term": {
                                "type": "string"
                              },
                              "averageGrade": {
                                "type": "number"
                              },
                              "totalGrades": {
                                "type": "integer"
                              }
                            }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "currentPage": {
                              "type": "integer"
                            },
                            "totalPages": {
                              "type": "integer"
                            },
                            "totalItems": {
                              "type": "integer"
                            },
                            "itemsPerPage": {
                              "type": "integer"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/api/v1/grades/statistics": {
      "get": {
        "tags": [
          "Grades"
        ],
        "summary": "Thống kê điểm",
        "description": "Lấy thống kê điểm của lớp học",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "classId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          },
          {
            "in": "query",
            "name": "term",
            "schema": {
              "type": "string",
              "enum": [
                1,
                2,
                "final"
              ]
            },
            "description": "Học kỳ"
          },
          {
            "in": "query",
            "name": "academicYear",
            "schema": {
              "type": "string",
              "pattern": "^\\d{4}-\\d{4}$"
            },
            "description": "Năm học"
          }
        ],
        "responses": {
          "200": {
            "description": "Thống kê điểm",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "statistics": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "subjectId": {
                                "type": "integer"
                              },
                              "averageGrade": {
                                "type": "number"
                              },
                              "minGrade": {
                                "type": "number"
                              },
                              "maxGrade": {
                                "type": "number"
                              },
                              "totalGrades": {
                                "type": "integer"
                              },
                              "passingGrades": {
                                "type": "integer"
                              }
                            }
                          }
                        },
                        "gradeDistribution": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "subjectId": {
                                "type": "integer"
                              },
                              "excellent": {
                                "type": "integer"
                              },
                              "good": {
                                "type": "integer"
                              },
                              "fair": {
                                "type": "integer"
                              },
                              "average": {
                                "type": "integer"
                              },
                              "poor": {
                                "type": "integer"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/api/v1/grades/report/export": {
      "get": {
        "tags": [
          "Grades"
        ],
        "summary": "Xuất báo cáo điểm Excel",
        "description": "Xuất báo cáo điểm dưới dạng file Excel",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "classId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          },
          {
            "in": "query",
            "name": "term",
            "schema": {
              "type": "string",
              "enum": [
                1,
                2,
                "final"
              ]
            },
            "description": "Học kỳ"
          },
          {
            "in": "query",
            "name": "academicYear",
            "schema": {
              "type": "string",
              "pattern": "^\\d{4}-\\d{4}$"
            },
            "description": "Năm học"
          }
        ],
        "responses": {
          "200": {
            "description": "File Excel báo cáo điểm",
            "content": {
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/api/v1/grades/{id}": {
      "put": {
        "tags": [
          "Grades"
        ],
        "summary": "Cập nhật điểm",
        "description": "Cập nhật thông tin điểm (chỉ Admin và Teacher)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID điểm"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "gradeValue": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 10,
                    "description": "Điểm số mới"
                  },
                  "weight": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100,
                    "description": "Trọng số mới"
                  },
                  "remarks": {
                    "type": "string",
                    "maxLength": 1000,
                    "description": "Ghi chú mới"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Grade"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      },
      "delete": {
        "tags": [
          "Grades"
        ],
        "summary": "Xóa điểm",
        "description": "Xóa điểm (soft delete - chỉ Admin và Teacher)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID điểm"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Health Check"
        ],
        "summary": "Kiểm tra trạng thái server",
        "description": "Endpoint để kiểm tra xem server có đang hoạt động không",
        "responses": {
          "200": {
            "description": "Server đang hoạt động bình thường",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "LMS Backend API is running"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2023-10-07T10:30:00.000Z"
                    },
                    "version": {
                      "type": "string",
                      "example": "1.0.0"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/lessons": {
      "get": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Lấy danh sách tất cả bài giảng",
        "description": "Lấy danh sách bài giảng với phân trang và tìm kiếm. Admin xem tất cả, Teacher xem bài giảng của lớp mình dạy.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Số trang"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Số lượng bài giảng mỗi trang"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Tìm kiếm theo tiêu đề hoặc mô tả"
          },
          {
            "in": "query",
            "name": "classId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID lớp học"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID môn học"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "draft",
                "published",
                "archived"
              ]
            },
            "description": "Lọc theo trạng thái"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách bài giảng thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LessonListResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Tạo bài giảng mới",
        "description": "Tạo bài giảng mới với nhiều file đính kèm (Admin hoặc Teacher được phân công). Hỗ trợ tối đa 10 files, mỗi file tối đa 100MB.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "classId",
                  "subjectId",
                  "title"
                ],
                "properties": {
                  "classId": {
                    "type": "integer",
                    "description": "ID lớp học",
                    "example": 1
                  },
                  "subjectId": {
                    "type": "integer",
                    "description": "ID môn học",
                    "example": 1
                  },
                  "title": {
                    "type": "string",
                    "description": "Tiêu đề bài giảng",
                    "example": "Bài 1: Giới thiệu về Toán học"
                  },
                  "description": {
                    "type": "string",
                    "description": "Mô tả bài giảng",
                    "example": "Bài giảng giới thiệu các khái niệm cơ bản về toán học, bao gồm số học, đại số và hình học"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "draft",
                      "published",
                      "archived"
                    ],
                    "default": "published",
                    "description": "Trạng thái bài giảng",
                    "example": "published"
                  },
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Danh sách file đính kèm (tối đa 10 files). \n\n**Hỗ trợ các loại file:**\n- Documents: pdf, docx, doc, pptx, ppt, xlsx, xls, txt\n- Media: mp4, avi, mkv, jpg, jpeg, png\n- Archive: zip, rar\n\n**Giới hạn:**\n- Tối đa 10 files\n- Mỗi file tối đa 100MB\n\n**Ví dụ upload 3 files:**\n- bai-giang-toan-hoc.pdf (Giáo trình)\n- slide-bai-giang.pptx (Slide thuyết trình)\n- bai-tap-thuc-hanh.docx (Bài tập)\n",
                    "maxItems": 10
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo bài giảng thành công với danh sách attachments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Tạo bài giảng thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "classId": {
                          "type": "integer",
                          "example": 1
                        },
                        "subjectId": {
                          "type": "integer",
                          "example": 1
                        },
                        "title": {
                          "type": "string",
                          "example": "Bài 1: Giới thiệu về Toán học"
                        },
                        "description": {
                          "type": "string",
                          "example": "Bài giảng giới thiệu các khái niệm cơ bản"
                        },
                        "status": {
                          "type": "string",
                          "example": "published"
                        },
                        "createdBy": {
                          "type": "integer",
                          "example": 2
                        },
                        "attachments": {
                          "type": "array",
                          "example": [
                            {
                              "id": 1,
                              "attachableType": "lesson",
                              "attachableId": 1,
                              "fileName": "bai-giang-toan-hoc.pdf",
                              "fileUrl": "/uploads/lessons/1730300000000-bai-giang-toan-hoc.pdf",
                              "fileSize": 1048576,
                              "fileType": "pdf",
                              "mimeType": "application/pdf",
                              "sortOrder": 0,
                              "uploadedBy": 2
                            },
                            {
                              "id": 2,
                              "attachableType": "lesson",
                              "attachableId": 1,
                              "fileName": "slide-bai-giang.pptx",
                              "fileUrl": "/uploads/lessons/1730300000001-slide-bai-giang.pptx",
                              "fileSize": 2097152,
                              "fileType": "pptx",
                              "mimeType": "application/vnd.openxmlformats-officedocument.presentationml.presentation",
                              "sortOrder": 1,
                              "uploadedBy": 2
                            },
                            {
                              "id": 3,
                              "attachableType": "lesson",
                              "attachableId": 1,
                              "fileName": "bai-tap-thuc-hanh.docx",
                              "fileUrl": "/uploads/lessons/1730300000002-bai-tap-thuc-hanh.docx",
                              "fileSize": 524288,
                              "fileType": "docx",
                              "mimeType": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                              "sortOrder": 2,
                              "uploadedBy": 2
                            }
                          ]
                        },
                        "createdAt": {
                          "type": "string",
                          "example": "2024-10-30T10:00:00.000Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "example": "2024-10-30T10:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/v1/lessons/{id}": {
      "get": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Lấy thông tin chi tiết bài giảng",
        "description": "Lấy thông tin chi tiết một bài giảng (Admin, Teacher được phân công, Student của lớp)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID bài giảng"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông tin bài giảng thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "classId": {
                          "type": "integer",
                          "example": 1
                        },
                        "subjectId": {
                          "type": "integer",
                          "example": 1
                        },
                        "title": {
                          "type": "string",
                          "example": "Bài 1: Giới thiệu về Toán học"
                        },
                        "description": {
                          "type": "string",
                          "example": "Bài giảng giới thiệu các khái niệm cơ bản"
                        },
                        "status": {
                          "type": "string",
                          "example": "published"
                        },
                        "createdBy": {
                          "type": "integer",
                          "example": 2
                        },
                        "attachments": {
                          "type": "array",
                          "example": [
                            {
                              "id": 1,
                              "fileName": "bai-giang-toan-hoc.pdf",
                              "fileUrl": "/uploads/lessons/1730300000000-bai-giang-toan-hoc.pdf",
                              "fileSize": 1048576,
                              "fileType": "pdf",
                              "mimeType": "application/pdf",
                              "sortOrder": 0,
                              "description": "Giáo trình chính"
                            },
                            {
                              "id": 2,
                              "fileName": "slide-bai-giang.pptx",
                              "fileUrl": "/uploads/lessons/1730300000001-slide-bai-giang.pptx",
                              "fileSize": 2097152,
                              "fileType": "pptx",
                              "mimeType": "application/vnd.openxmlformats-officedocument.presentationml.presentation",
                              "sortOrder": 1
                            }
                          ]
                        },
                        "class": {
                          "type": "object",
                          "example": {
                            "id": 1,
                            "name": "Lớp 10A1",
                            "code": "10A1"
                          }
                        },
                        "subject": {
                          "type": "object",
                          "example": {
                            "id": 1,
                            "name": "Toán học",
                            "code": "MATH"
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "example": "2024-10-30T10:00:00.000Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "example": "2024-10-30T10:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "put": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Cập nhật bài giảng",
        "description": "Cập nhật thông tin bài giảng, thêm files mới và/hoặc xóa files cũ (Admin hoặc Teacher tạo bài giảng)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID bài giảng"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "Tiêu đề bài giảng",
                    "example": "Bài 1: Giới thiệu về Toán học (Cập nhật)"
                  },
                  "description": {
                    "type": "string",
                    "description": "Mô tả bài giảng",
                    "example": "Bài giảng đã được cập nhật với tài liệu mới hơn"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "draft",
                      "published",
                      "archived"
                    ],
                    "description": "Trạng thái bài giảng",
                    "example": "published"
                  },
                  "deleteAttachmentIds": {
                    "type": "string",
                    "description": "JSON array chứa IDs của các attachments cần xóa.\n\n**Lưu ý:** Phải là chuỗi JSON hợp lệ, không phải array thuần.\n\n**Ví dụ:**\n- Xóa 2 files: \"[1, 2]\"\n- Xóa 1 file: \"[5]\"\n- Không xóa: \"\" hoặc bỏ trống\n",
                    "example": "[1, 2]"
                  },
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Danh sách file mới cần thêm (tối đa 10 files).\n\n**Hành vi:**\n1. Files trong deleteAttachmentIds sẽ bị xóa khỏi DB và filesystem\n2. Files mới sẽ được thêm với sortOrder tiếp theo\n3. Files cũ không nằm trong deleteAttachmentIds sẽ được giữ nguyên\n\n**Ví dụ kịch bản:**\n- Có 3 files cũ: [id:1, id:2, id:3]\n- deleteAttachmentIds: \"[1, 2]\" → Xóa file 1, 2\n- Thêm 2 files mới → Kết quả: [id:3 (cũ), id:4 (mới), id:5 (mới)]\n",
                    "maxItems": 10
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật bài giảng thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật bài giảng thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "title": {
                          "type": "string",
                          "example": "Bài 1: Giới thiệu về Toán học (Đã cập nhật)"
                        },
                        "description": {
                          "type": "string",
                          "example": "Bài giảng đã được cập nhật với tài liệu mới"
                        },
                        "status": {
                          "type": "string",
                          "example": "published"
                        },
                        "attachments": {
                          "type": "array",
                          "description": "Danh sách attachments sau khi xóa [1,2] và thêm mới",
                          "example": [
                            {
                              "id": 3,
                              "fileName": "bai-tap-cu.docx",
                              "fileUrl": "/uploads/lessons/1730300000002-bai-tap-cu.docx",
                              "fileSize": 524288,
                              "fileType": "docx",
                              "sortOrder": 0,
                              "description": "File cũ không bị xóa"
                            },
                            {
                              "id": 4,
                              "fileName": "giao-trinh-moi.pdf",
                              "fileUrl": "/uploads/lessons/1730305000000-giao-trinh-moi.pdf",
                              "fileSize": 3145728,
                              "fileType": "pdf",
                              "sortOrder": 1,
                              "description": "File mới được thêm"
                            },
                            {
                              "id": 5,
                              "fileName": "video-huong-dan.mp4",
                              "fileUrl": "/uploads/lessons/1730305000001-video-huong-dan.mp4",
                              "fileSize": 10485760,
                              "fileType": "mp4",
                              "sortOrder": 2,
                              "description": "File mới được thêm"
                            }
                          ]
                        },
                        "updatedAt": {
                          "type": "string",
                          "example": "2024-10-30T12:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "delete": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Xóa bài giảng",
        "description": "Xóa bài giảng và tất cả file đính kèm (Admin hoặc Teacher tạo bài giảng)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID bài giảng"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa bài giảng thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Xóa bài giảng thành công"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/v1/lessons/class/{classId}": {
      "get": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Lấy danh sách bài giảng theo lớp học",
        "description": "Lấy danh sách bài giảng của một lớp học cụ thể",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "classId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Số trang"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Số lượng bài giảng mỗi trang"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID môn học"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "inactive"
              ],
              "default": "active"
            },
            "description": "Lọc theo trạng thái"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách bài giảng theo lớp thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "lessons": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Lesson"
                          }
                        },
                        "classInfo": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer",
                              "example": 1
                            },
                            "name": {
                              "type": "string",
                              "example": "Lớp 10A1"
                            },
                            "grade": {
                              "type": "integer",
                              "example": 10
                            }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "currentPage": {
                              "type": "integer",
                              "example": 1
                            },
                            "totalPages": {
                              "type": "integer",
                              "example": 3
                            },
                            "totalItems": {
                              "type": "integer",
                              "example": 25
                            },
                            "itemsPerPage": {
                              "type": "integer",
                              "example": 10
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/v1/lessons/files/{filename}": {
      "get": {
        "tags": [
          "Lesson Management"
        ],
        "summary": "Tải xuống file bài giảng",
        "description": "Tải xuống file tài liệu của bài giảng (Admin, Teacher được phân công, Student của lớp)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "filename",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Tên file",
            "example": "1234567890-bai-giang-toan.pdf"
          }
        ],
        "responses": {
          "200": {
            "description": "File được tải xuống thành công",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "application/vnd.openxmlformats-officedocument.wordprocessingml.document": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "video/mp4": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/v1/notifications": {
      "post": {
        "summary": "Tạo thông báo mới (Admin/Teacher)",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "message",
                  "receiverRole"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "Tiêu đề thông báo"
                  },
                  "message": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 5000,
                    "description": "Nội dung thông báo"
                  },
                  "receiverRole": {
                    "type": "string",
                    "enum": [
                      "student",
                      "teacher",
                      "admin",
                      "all"
                    ],
                    "description": "Vai trò người nhận"
                  },
                  "classId": {
                    "type": "integer",
                    "description": "ID lớp học (tùy chọn)"
                  },
                  "subjectId": {
                    "type": "integer",
                    "description": "ID môn học (tùy chọn)"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "announcement",
                      "assignment",
                      "grade",
                      "forum",
                      "system",
                      "reminder"
                    ],
                    "default": "announcement"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "urgent"
                    ],
                    "default": "medium"
                  },
                  "scheduledAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Thời gian lên lịch gửi"
                  },
                  "expiresAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Thời gian hết hạn"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Dữ liệu bổ sung"
                  },
                  "attachments": {
                    "type": "array",
                    "items": {
                      "type": "object"
                    },
                    "description": "File đính kèm"
                  }
                }
              },
              "example": {
                "title": "Thông báo nghỉ học",
                "message": "Lớp 10A1 nghỉ học vào thứ 2 tuần tới do giáo viên có việc đột xuất",
                "receiverRole": "student",
                "classId": 1,
                "type": "announcement",
                "priority": "high"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo thông báo thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Notification"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền tạo thông báo"
          }
        }
      }
    },
    "/api/v1/notifications/my": {
      "get": {
        "summary": "Lấy danh sách thông báo của tôi",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Số thông báo mỗi trang"
          },
          {
            "in": "query",
            "name": "type",
            "schema": {
              "type": "string",
              "enum": [
                "announcement",
                "assignment",
                "grade",
                "forum",
                "system",
                "reminder"
              ]
            },
            "description": "Lọc theo loại thông báo"
          },
          {
            "in": "query",
            "name": "priority",
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ]
            },
            "description": "Lọc theo mức độ ưu tiên"
          },
          {
            "in": "query",
            "name": "unreadOnly",
            "schema": {
              "type": "boolean"
            },
            "description": "Chỉ lấy thông báo chưa đọc"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách thông báo thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "notifications": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Notification"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/Pagination"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/unread-count": {
      "get": {
        "summary": "Lấy số lượng thông báo chưa đọc",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy số lượng thông báo chưa đọc thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "unreadCount": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/{id}": {
      "get": {
        "summary": "Lấy chi tiết thông báo",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID thông báo"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông báo thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Notification"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy thông báo"
          }
        }
      },
      "put": {
        "summary": "Cập nhật thông báo (Admin/Teacher)",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID thông báo"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200
                  },
                  "message": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 5000
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "announcement",
                      "assignment",
                      "grade",
                      "forum",
                      "system",
                      "reminder"
                    ]
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "urgent"
                    ]
                  },
                  "scheduledAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "expiresAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "metadata": {
                    "type": "object"
                  },
                  "attachments": {
                    "type": "array"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật thông báo thành công"
          },
          "403": {
            "description": "Không có quyền cập nhật thông báo"
          }
        }
      },
      "delete": {
        "summary": "Xóa thông báo (Admin/Teacher)",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID thông báo"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa thông báo thành công"
          },
          "403": {
            "description": "Không có quyền xóa thông báo"
          }
        }
      }
    },
    "/api/v1/notifications/{id}/read": {
      "put": {
        "summary": "Đánh dấu thông báo đã đọc",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID thông báo"
          }
        ],
        "responses": {
          "200": {
            "description": "Đánh dấu thông báo thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/mark-all-read": {
      "put": {
        "summary": "Đánh dấu tất cả thông báo đã đọc",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Đánh dấu tất cả thông báo thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/stats": {
      "get": {
        "summary": "Lấy thống kê thông báo (Admin/Teacher)",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Ngày bắt đầu"
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Ngày kết thúc"
          },
          {
            "in": "query",
            "name": "classId",
            "schema": {
              "type": "integer"
            },
            "description": "ID lớp học"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thống kê thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalNotifications": {
                          "type": "integer"
                        },
                        "averageReadRate": {
                          "type": "number"
                        },
                        "statsByTypeAndPriority": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền xem thống kê"
          }
        }
      }
    },
    "/api/v1/student-enrollments": {
      "get": {
        "summary": "Lấy danh sách tất cả ghi danh",
        "tags": [
          "Student Enrollment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          },
          {
            "in": "query",
            "name": "classId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID lớp học"
          },
          {
            "in": "query",
            "name": "studentId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID học sinh"
          },
          {
            "in": "query",
            "name": "isActive",
            "schema": {
              "type": "boolean"
            },
            "description": "Lọc theo trạng thái hoạt động"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Tìm kiếm theo tên học sinh hoặc lớp"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách ghi danh thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy danh sách ghi danh thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "enrollments": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/StudentEnrollment"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          }
        }
      },
      "post": {
        "summary": "Ghi danh một học sinh vào lớp",
        "tags": [
          "Student Enrollment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "studentId",
                  "classId"
                ],
                "properties": {
                  "studentId": {
                    "type": "integer",
                    "example": 1
                  },
                  "classId": {
                    "type": "integer",
                    "example": 1
                  },
                  "enrollmentDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-01-15"
                  },
                  "isActive": {
                    "type": "boolean",
                    "description": "Trạng thái hoạt động của ghi danh (true = active, false = inactive)",
                    "example": true,
                    "default": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ghi danh học sinh thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Ghi danh học sinh vào lớp thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/StudentEnrollment"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/student-enrollments/student/{studentId}": {
      "get": {
        "summary": "Lấy lớp học của một học sinh",
        "tags": [
          "Student Enrollment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "studentId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID học sinh"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          },
          {
            "in": "query",
            "name": "isActive",
            "schema": {
              "type": "boolean"
            },
            "description": "Lọc theo trạng thái hoạt động"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy lớp học của học sinh thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy danh sách lớp học của học sinh thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "student": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer"
                            },
                            "fullName": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            }
                          }
                        },
                        "enrollments": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/StudentEnrollment"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/student-enrollments/multiple": {
      "post": {
        "summary": "Ghi danh nhiều học sinh vào lớp",
        "tags": [
          "Student Enrollment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "studentIds",
                  "classId"
                ],
                "properties": {
                  "studentIds": {
                    "type": "array",
                    "items": {
                      "type": "integer"
                    },
                    "minItems": 1,
                    "example": [
                      1,
                      2,
                      3
                    ]
                  },
                  "classId": {
                    "type": "integer",
                    "example": 1
                  },
                  "enrollmentDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-01-15"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ghi danh nhiều học sinh thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Ghi danh thành công 3 học sinh vào lớp"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "enrolledCount": {
                          "type": "integer",
                          "example": 3
                        },
                        "skippedCount": {
                          "type": "integer",
                          "example": 0
                        },
                        "enrollments": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/StudentEnrollment"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/api/v1/student-enrollments/{id}": {
      "put": {
        "summary": "Cập nhật trạng thái ghi danh",
        "tags": [
          "Student Enrollment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID ghi danh"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "isActive": {
                    "type": "boolean",
                    "description": "Trạng thái hoạt động của ghi danh (true = active, false = inactive)",
                    "example": true
                  },
                  "enrollmentDate": {
                    "type": "string",
                    "format": "date",
                    "description": "Ngày ghi danh của học sinh",
                    "example": "2024-02-01"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật ghi danh thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật ghi danh thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/StudentEnrollment"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "summary": "Xóa ghi danh (soft delete)",
        "tags": [
          "Student Enrollment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID ghi danh"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa ghi danh thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Xóa ghi danh thành công"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/subjects": {
      "get": {
        "summary": "Lấy danh sách tất cả môn học",
        "tags": [
          "Subject Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Tìm kiếm theo tên môn học"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách môn học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy danh sách môn học thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "subjects": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Subject"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          }
        }
      },
      "post": {
        "summary": "Tạo môn học mới",
        "tags": [
          "Subject Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Toán học"
                  },
                  "code": {
                    "type": "string",
                    "maxLength": 20,
                    "example": "MATH"
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 1000,
                    "example": "Môn toán học cơ bản và nâng cao"
                  },
                  "credits": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "example": 4
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo môn học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Tạo môn học thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Subject"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/api/v1/subjects/{id}": {
      "get": {
        "summary": "Lấy thông tin chi tiết môn học theo ID",
        "tags": [
          "Subject Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông tin môn học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy thông tin môn học thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Subject"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "put": {
        "summary": "Cập nhật thông tin môn học",
        "tags": [
          "Subject Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Toán học (Cập nhật)"
                  },
                  "code": {
                    "type": "string",
                    "maxLength": 20,
                    "example": "MATH_UPD"
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 1000,
                    "example": "Môn toán học cơ bản và nâng cao (Cập nhật)"
                  },
                  "credits": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "example": 5
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật môn học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật môn học thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Subject"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "summary": "Xóa môn học (soft delete)",
        "tags": [
          "Subject Management"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID môn học"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa môn học thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Xóa môn học thành công"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/teacher-assignments": {
      "get": {
        "summary": "Lấy danh sách tất cả phân công giáo viên",
        "tags": [
          "Teacher Assignment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          },
          {
            "in": "query",
            "name": "teacherId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID giáo viên"
          },
          {
            "in": "query",
            "name": "classId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID lớp học"
          },
          {
            "in": "query",
            "name": "subjectId",
            "schema": {
              "type": "integer"
            },
            "description": "Lọc theo ID môn học"
          },
          {
            "in": "query",
            "name": "isActive",
            "schema": {
              "type": "boolean"
            },
            "description": "Lọc theo trạng thái hoạt động"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách phân công thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy danh sách phân công thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "assignments": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/TeacherAssignment"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          }
        }
      },
      "post": {
        "summary": "Tạo phân công giáo viên mới",
        "tags": [
          "Teacher Assignment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "teacherId",
                  "classId",
                  "subjectId"
                ],
                "properties": {
                  "teacherId": {
                    "type": "integer",
                    "example": 1
                  },
                  "classId": {
                    "type": "integer",
                    "example": 1
                  },
                  "subjectId": {
                    "type": "integer",
                    "example": 1
                  },
                  "startDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-01-01"
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-06-30"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Phân công giáo viên thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Phân công giáo viên thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/TeacherAssignment"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/teacher-assignments/teacher/{teacherId}": {
      "get": {
        "summary": "Lấy phân công của một giáo viên cụ thể",
        "tags": [
          "Teacher Assignment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "teacherId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID giáo viên"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            },
            "description": "Trang hiện tại"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer"
            },
            "description": "Số lượng mỗi trang"
          },
          {
            "in": "query",
            "name": "isActive",
            "schema": {
              "type": "boolean"
            },
            "description": "Lọc theo trạng thái hoạt động"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy phân công của giáo viên thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy phân công của giáo viên thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "assignments": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/TeacherAssignment"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationInfo"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/teacher-assignments/{id}": {
      "put": {
        "summary": "Cập nhật phân công giáo viên",
        "tags": [
          "Teacher Assignment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID phân công"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "startDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-02-01"
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2024-07-31"
                  },
                  "isActive": {
                    "type": "boolean",
                    "example": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật phân công thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật phân công thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/TeacherAssignment"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "summary": "Xóa phân công giáo viên (soft delete)",
        "tags": [
          "Teacher Assignment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID phân công"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa phân công thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Xóa phân công thành công"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "tags": [
          "User Management"
        ],
        "summary": "Lấy danh sách tất cả người dùng (Admin only)",
        "description": "Lấy danh sách người dùng với phân trang, tìm kiếm và lọc",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "Số trang"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "Số lượng user mỗi trang"
          },
          {
            "in": "query",
            "name": "role",
            "schema": {
              "type": "string",
              "enum": [
                "admin",
                "teacher",
                "student"
              ]
            },
            "description": "Lọc theo vai trò"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Tìm kiếm theo tên hoặc email"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "name",
                "email",
                "role"
              ],
              "default": "createdAt"
            },
            "description": "Sắp xếp theo trường"
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "ASC",
                "DESC"
              ],
              "default": "DESC"
            },
            "description": "Thứ tự sắp xếp"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy danh sách thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập (chỉ Admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "User Management"
        ],
        "summary": "Tạo người dùng mới (Admin only)",
        "description": "Admin tạo tài khoản người dùng mới",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tạo người dùng thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Tạo người dùng thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dữ liệu không hợp lệ hoặc email đã tồn tại",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập (chỉ Admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/stats": {
      "get": {
        "tags": [
          "User Management"
        ],
        "summary": "Lấy thống kê người dùng (Admin only)",
        "description": "Lấy thống kê tổng quan về người dùng trong hệ thống",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thống kê thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy thống kê người dùng thành công"
                    },
                    "data": {
                      "$ref": "#/components/schemas/UserStats"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập (chỉ Admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{userId}": {
      "delete": {
        "tags": [
          "User Management"
        ],
        "summary": "Xóa người dùng (Admin only)",
        "description": "Admin xóa tài khoản người dùng (không thể xóa chính mình)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID của người dùng cần xóa"
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa người dùng thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Không thể xóa chính mình",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập (chỉ Admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy người dùng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "User Management"
        ],
        "summary": "Lấy thông tin một người dùng",
        "description": "Lấy thông tin chi tiết của một người dùng (Admin hoặc chính user đó)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID của người dùng"
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông tin thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lấy thông tin người dùng thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy người dùng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "User Management"
        ],
        "summary": "Cập nhật thông tin người dùng",
        "description": "Cập nhật thông tin người dùng. Tất cả các trường đều optional (không bắt buộc).\n\n**Quyền hạn:**\n- Admin có thể cập nhật tất cả các trường\n- User thường chỉ có thể cập nhật: name, email, password, phoneNumber, address\n\n**Lưu ý:**\n- Để xóa giá trị của phoneNumber, code, address: gửi chuỗi rỗng (\"\") hoặc null\n- Password chỉ cập nhật khi được gửi, để trống nếu không muốn đổi\n- Chỉ admin có thể thay đổi: role, code, isActive\n",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID của người dùng cần cập nhật"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cập nhật thông tin người dùng thành công"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Email đã được sử dụng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập hoặc không thể thay đổi role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy người dùng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{userId}/reset-password": {
      "put": {
        "tags": [
          "User Management"
        ],
        "summary": "Reset mật khẩu người dùng (Admin only)",
        "description": "Admin reset mật khẩu cho người dùng",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID của người dùng cần reset mật khẩu"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "newPassword"
                ],
                "properties": {
                  "newPassword": {
                    "type": "string",
                    "minLength": 6,
                    "maxLength": 50,
                    "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)",
                    "description": "Mật khẩu mới",
                    "example": "NewPassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reset mật khẩu thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token không hợp lệ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền truy cập (chỉ Admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy người dùng",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi server",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  }
}